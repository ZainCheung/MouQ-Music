(function(e){function t(t){for(var a,i,l=t[0],r=t[1],c=t[2],u=0,d=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a]);p&&p(t);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,i=1;i<n.length;i++){var l=n[i];0!==s[l]&&(a=!1)}a&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},i={app:0},s={app:0},o=[];function l(e){return r.p+"static/js/"+({about:"about"}[e]||e)+"."+{about:"f2bfb154"}[e]+".js"}function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.e=function(e){var t=[],n={about:1};i[e]?t.push(i[e]):0!==i[e]&&n[e]&&t.push(i[e]=new Promise((function(t,n){for(var a="static/css/"+({about:"about"}[e]||e)+"."+{about:"aca140c6"}[e]+".css",s=r.p+a,o=document.getElementsByTagName("link"),l=0;l<o.length;l++){var c=o[l],u=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(u===a||u===s))return t()}var d=document.getElementsByTagName("style");for(l=0;l<d.length;l++){c=d[l],u=c.getAttribute("data-href");if(u===a||u===s)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var a=t&&t.target&&t.target.src||s,o=new Error("Loading CSS chunk "+e+" failed.\n("+a+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=a,delete i[e],p.parentNode.removeChild(p),n(o)},p.href=s;var g=document.getElementsByTagName("head")[0];g.appendChild(p)})).then((function(){i[e]=0})));var a=s[e];if(0!==a)if(a)t.push(a[2]);else{var o=new Promise((function(t,n){a=s[e]=[t,n]}));t.push(a[2]=o);var c,u=document.createElement("script");u.charset="utf-8",u.timeout=120,r.nc&&u.setAttribute("nonce",r.nc),u.src=l(e);var d=new Error;c=function(t){u.onerror=u.onload=null,clearTimeout(p);var n=s[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+a+": "+i+")",d.name="ChunkLoadError",d.type=a,d.request=i,n[1](d)}s[e]=void 0}};var p=setTimeout((function(){c({type:"timeout",target:u})}),12e4);u.onerror=u.onload=c,document.head.appendChild(u)}return Promise.all(t)},r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var d=0;d<c.length;d++)t(c[d]);var p=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"469e":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("5c96"),i=n.n(a),s=(n("0fae"),n("a026")),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[e._v("解析歌单")]),e._v(" | "),n("router-link",{attrs:{to:"/help"}},[e._v("帮助")]),e._v(" | "),n("router-link",{attrs:{to:"/about"}},[e._v("关于")])],1),n("router-view")],1)},l=[],r=(n("5c0b"),n("2877")),c={},u=Object(r["a"])(c,o,l,!1,null,null,null),d=u.exports,p=n("bc3a"),g=n.n(p),f=n("a7fe"),h=n.n(f);n("c69f");s["default"].use(i.a);n("d3b7");var m=n("8c4f"),b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("PlayList")],1)},y=[],v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-main",[n("el-row",[n("el-col",{attrs:{xs:24,sm:18,md:16,lg:16,id:"main"}},[n("label",[e._v("请粘贴某Q音乐歌单链接或者id：")]),n("el-input",{attrs:{clearable:"",placeholder:"请输入歌单链接或者id"},on:{input:e.formatLink},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(t)}},model:{value:e.link,callback:function(t){e.link=t},expression:"link"}}),n("el-button",{staticClass:"btn-auto",attrs:{type:"primary",icon:"el-icon-search",plain:"",loading:e.loading},on:{click:e.search}},[e._v("解析")]),null!=e.listinfo?n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"info-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[e._v(e._s(e.listinfo.name)+" 来自:"+e._s(e.listinfo.user)+" 共有:"+e._s(e.listinfo.total)+"首歌")])]),n("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[n("el-row",[e.aplayermusic.show?n("aplayer",{ref:"aplayer",attrs:{music:e.aplayermusic,autoplay:"",repeat:"repeat-one"}}):e._e()],1)],1)],1):e._e(),[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tablesonglist,align:"left"},on:{"row-dblclick":e.rowClick,"cell-mouse-enter":e.mouseEnter,"cell-mouse-leave":e.mouseLeave,"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"50"}}),n("el-table-column",{attrs:{prop:"name",label:"歌名"}}),n("el-table-column",{attrs:{prop:"singer",label:"歌手"}}),n("el-table-column",{attrs:{width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:e.tablesonglist[t.$index].size,placement:"left"}},[n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-download",plain:"",circle:""},on:{click:function(n){return e.download(t.$index)}}})],1),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.tablesonglist[t.$index].playShow,expression:"tablesonglist[a.$index].playShow"}],attrs:{size:"small",icon:"el-icon-video-play",plain:"",circle:""},on:{click:function(n){return e.startPlayOrPause(e.tablesonglist[t.$index].mid,e.tablesonglist[t.$index].name,e.tablesonglist[t.$index].singer)}}})]}}])},[n("template",{slot:"header"},[n("el-button",{attrs:{type:"primary",plain:"",disabled:e.disabledChoose},on:{click:e.downloadChoose}},[e._v("下载选中")])],1)],2)],1)]],2)],1)],1),n("el-footer",[n("el-row",[n("el-col",{attrs:{xs:24,sm:18,md:14,lg:14,id:"main"}},[n("a",{staticStyle:{display:"inline-block","text-decoration":"none",height:"20px","line-height":"20px"},attrs:{target:"_blank",href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41152502000110"}},[n("img",{staticStyle:{float:"left"},attrs:{src:"https://s1.ax1x.com/2020/03/24/8qhVyj.png"}}),n("span",{staticStyle:{float:"left",height:"20px","line-height":"20px",margin:"0px 0px 0px 5px",color:"#939393"}},[e._v("豫公网安备 41152502000110号")])]),n("a",{staticStyle:{display:"inline-block","text-decoration":"none",height:"20px","line-height":"20px"},attrs:{target:"_blank",href:"http://www.beian.miit.gov.cn"}},[n("span",{staticStyle:{float:"left",height:"20px","line-height":"20px",margin:"0px 0px 0px 5px",color:"#939393"}},[e._v("豫ICP备19039675号")])])])],1)],1)],1)},w=[],x=(n("4160"),n("c975"),n("fb6a"),n("a434"),n("b0c0"),n("ac1f"),n("5319"),n("9911"),n("159b"),"tabale-vuejs"),k="listinfo",S={fetch:function(){return JSON.parse(window.localStorage.getItem(x)||"[]")},save:function(e){window.localStorage.setItem(x,JSON.stringify(e))},getsonglist:function(){return JSON.parse(window.localStorage.getItem(x)||"[]")},getinfo:function(){return JSON.parse(window.localStorage.getItem(k)||null)},updatainfo:function(e){window.localStorage.setItem(k,JSON.stringify(e))}},_=(n("b680"),n("3e8f")),O={formatSize:function(e){var t="";t=e<1024?e.toFixed(2)+"B":e<1048576?(e/1024).toFixed(2)+"KB":e<1073741824?(e/1048576).toFixed(2)+"MB":(e/1073741824).toFixed(2)+"GB";var n=t+"",a=n.indexOf("."),i=n.substr(a+1,2);return"00"==i?n.substring(0,a)+n.substr(a+3,2):n},makeNameInfo:function(e){_.writeFile("info.json",e,"utf8",(function(e){if(e)return console.log(e),!1;console.log("信息文件写入成功")}))},getIndexInArray:function(e,t){var n=e.length;while(n--)if(e[n]===t)return n;return!1}},C=n("0f7d"),P=n.n(C),j={name:"PlayList",components:{aplayer:P.a},data:function(){return{link:"",playlistid:"",song:{id:"",mid:"",name:"",singer:"",album:"",type:"",size:""},songlist:[],Selection:[],loading:!1,disabledChoose:!0,audiosrc:null,audio:{playing:!1},aplayermusic:{show:!1},playingmid:null,tablesonglist:S.getsonglist(),listinfo:S.getinfo()}},methods:{formatLink:function(){var e,t;-1!=this.link.indexOf("i.y.qq.com")?(e=this.link.indexOf("id="),t=this.link.indexOf("&ADTAG"),this.playlistid=-1!=t?this.link.slice(e+3,t):this.link.slice(e+3)):-1!=this.link.indexOf("y.qq.com")?(e=this.link.indexOf("/playlist/"),t=this.link.indexOf(".html"),this.playlistid=this.link.slice(e+10,t)):this.playlistid=this.link},search:function(){var e=this;e.loading=!0,this.axios.get("https://mq.api.superboyjack.cn/songlist",{params:{id:this.playlistid}}).then((function(t){if(e.loading=!1,500!=t.data.result)if("{}"!==JSON.stringify(t.data.data)){e.$message({showClose:!0,message:"解析成功",type:"success"}),e.tablesonglist.splice(0,e.tablesonglist.length),e.loading=!1,e.listinfo={name:t.data.data.dissname,user:t.data.data.nick,logo:t.data.data.logo,headurl:t.data.data.headurl,total:t.data.data.total_song_num};for(var n=t.data.data.songlist.length,a={},i=0;i<n;i++){e.songlist=t.data.data.songlist,e.song={id:e.songlist[i].songid,mid:e.songlist[i].songmid,name:e.songlist[i].songname,album:e.songlist[i].albumname,playShow:!1};for(var s=0;s<e.songlist[i].singer.length;s++)e.song.singer=0!=s?e.song.singer+" / "+e.songlist[i].singer[s].name:e.songlist[i].singer[s].name;0!=e.songlist[i].sizeflac?(e.song.type="flac",e.song.size=e.songlist[i].sizeflac):0!=e.songlist[i].sizeape?(e.song.type="ape",e.song.size=e.songlist[i].sizeape):0!=e.songlist[i].size320||0!=e.songlist[i].size128?(e.song.type="128",e.song.size=e.songlist[i].size128):(e.song.type=null,e.song.size=0),a[e.songlist[i].songmid]=e.songlist[i].songname+"-"+e.song.singer,e.song.size=O.formatSize(e.song.size),e.tablesonglist.push(e.song),e.song={id:"",mid:"",name:"",singer:"",album:"",type:"",size:""}}}else e.$message({showClose:!0,message:"未能解析到歌单,请检查输入是否正确",type:"warning"});else e.$message({showClose:!0,message:t.data.errMsg,type:"error"})})).catch((function(t){e.loading=!1,console.log(t)}))},downloadFile:function(e,t,n){try{var a=window.require("electron").ipcRenderer;a.send("setname",t)}catch(s){}var i=document.createElement("a");i.style.display="none",i.href=e,i.setAttribute("download",t+"."+n),document.body.appendChild(i),i.click()},download:function(e){var t=this;this.axios.get("https://mq.api.superboyjack.cn/song/url",{params:{id:this.tablesonglist[e].mid,type:this.tablesonglist[e].type}}).then((function(a){var i=t.tablesonglist[e].name,s=t.tablesonglist[e].type;if("320"!=s&&"128"!=s||(s="mp3"),i=i+"-"+t.tablesonglist[e].singer,"undefined"!=typeof a.data.data){var o=a.data.data.indexOf(".com"),l=a.data.data.replace("http","https");if(-1!=o){var r=n("21a6");r.saveAs(l,i+"."+s)}}else t.$message({showClose:!0,message:i+"这首歌已经下架了,无能为力哦",type:"warning"})})).catch((function(e){console.log(e)}))},downloadChoose:function(){var e=this,t=this;this.$message({showClose:!0,message:"开始下载选中的"+this.Selection.length+"首歌"}),this.Selection.forEach((function(n){e.timer=setTimeout((function(){t.download(O.getIndexInArray(e.tablesonglist,n))}),200)}))},rowClick:function(e){var t=this.tablesonglist.indexOf(e),n=this.tablesonglist[t].mid,a=this.tablesonglist[t].name,i=this.tablesonglist[t].singer;this.startPlayOrPause(n,a,i)},mouseEnter:function(e){var t=this.tablesonglist.indexOf(e);this.tablesonglist[t].playShow=!0},mouseLeave:function(e){var t=this.tablesonglist.indexOf(e);this.tablesonglist[t].playShow=!1},handleSelectionChange:function(e){this.Selection=e,0==this.Selection.length?this.disabledChoose=!0:this.disabledChoose=!1},getAudioUrl:function(e){var t=this;this.axios.get("https://mq.api.superboyjack.cn/song/url",{params:{id:e}}).then((function(n){var a=n.data.data.replace("http","https");"undefined"!=typeof a?(t.audiosrc=a,t.playingmid=e):t.$message({showClose:!0,message:"这首歌已经找不到了,换一首听听吧",type:"warning"})})).catch((function(e){console.log(e)}))},startPlayOrPause:function(e,t,n){var a=this,i=this;i.getAudioUrl(e),clearTimeout(this.timer),this.timer=setTimeout((function(){null!=a.audiosrc&&a.play(t,n)}),1e3)},play:function(e,t){var n=this,a=this;this.aplayermusic.show=!1,this.timer=setTimeout((function(){n.aplayermusic={src:a.audiosrc,title:e,artist:t,show:!0}}),20)}},watch:{tablesonglist:{handler:function(e){S.save(e)},deep:!0},listinfo:{handler:function(e){S.updatainfo(e)},deep:!0}}},z=j,E=(n("6880"),Object(r["a"])(z,v,w,!1,null,null,null)),N=E.exports,$={name:"Home",components:{PlayList:N}},A=$,T=Object(r["a"])(A,b,y,!1,null,null,null),I=T.exports;s["default"].use(m["a"]);var L=[{path:"/",name:"Home",component:I,meta:{title:"牟Q音乐"}},{path:"/help",name:"Help",component:function(){return n.e("about").then(n.bind(null,"c3ef"))},meta:{title:"帮助"}},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))},meta:{title:"关于"}},{path:"/playlist",name:"PlayList",component:N}],q=new m["a"]({routes:L});q.beforeEach((function(e,t,n){window._hmt&&e.path&&window._hmt.push(["_trackPageview","/#"+e.fullPath]),n()}));var B=q;s["default"].use(i.a),s["default"].use(h.a,g.a),s["default"].use(P.a),s["default"].config.productionTip=!1,new s["default"]({router:B,render:function(e){return e(d)}}).$mount("#app");var J=J||[];window._hmt=J,function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?215b0bc22df238301a383657d170d476";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()},"5c0b":function(e,t,n){"use strict";var a=n("9c0c"),i=n.n(a);i.a},6880:function(e,t,n){"use strict";var a=n("469e"),i=n.n(a);i.a},"9c0c":function(e,t,n){},c69f:function(e,t,n){}});
//# sourceMappingURL=app.caabf8f1.js.map