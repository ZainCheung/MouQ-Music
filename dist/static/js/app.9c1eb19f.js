(function(t){function e(e){for(var i,o,l=e[0],r=e[1],c=e[2],u=0,p=[];u<l.length;u++)o=l[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);d&&d(e);while(p.length)p.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],i=!0,o=1;o<n.length;o++){var r=n[o];0!==a[r]&&(i=!1)}i&&(s.splice(e--,1),t=l(l.s=n[0]))}return t}var i={},a={app:0},s=[];function o(t){return l.p+"static/js/"+({about:"about"}[t]||t)+"."+{about:"88be4a75"}[t]+".js"}function l(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(t){var e=[],n=a[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,i){n=a[t]=[e,i]}));e.push(n[2]=i);var s,r=document.createElement("script");r.charset="utf-8",r.timeout=120,l.nc&&r.setAttribute("nonce",l.nc),r.src=o(t);var c=new Error;s=function(e){r.onerror=r.onload=null,clearTimeout(u);var n=a[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),s=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+s+")",c.name="ChunkLoadError",c.type=i,c.request=s,n[1](c)}a[t]=void 0}};var u=setTimeout((function(){s({type:"timeout",target:r})}),12e4);r.onerror=r.onload=s,document.head.appendChild(r)}return Promise.all(e)},l.m=t,l.c=i,l.d=function(t,e,n){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},l.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)l.d(n,i,function(e){return t[e]}.bind(null,i));return n},l.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="",l.oe=function(t){throw console.error(t),t};var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var d=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"469e":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("5c96"),a=n.n(i),s=(n("0fae"),n("a026")),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/"}},[t._v("解析歌单")]),t._v(" | "),n("router-link",{attrs:{to:"/help"}},[t._v("帮助")]),t._v(" | "),n("router-link",{attrs:{to:"/about"}},[t._v("关于")])],1),n("router-view")],1)},l=[],r=(n("5c0b"),n("2877")),c={},u=Object(r["a"])(c,o,l,!1,null,null,null),d=u.exports,p=n("bc3a"),g=n.n(p),f=n("a7fe"),h=n.n(f);n("c69f");s["default"].use(a.a);n("d3b7");var m=n("8c4f"),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("PlayList")],1)},y=[],v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-container",[n("el-main",[n("el-row",[n("el-col",{attrs:{xs:24,sm:18,md:16,lg:16,id:"main"}},[n("label",[t._v("请粘贴某Q音乐歌单链接或者id：")]),n("el-input",{attrs:{clearable:"",placeholder:"请输入歌单链接或者id"},on:{input:t.formatLink},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search(e)}},model:{value:t.link,callback:function(e){t.link=e},expression:"link"}}),n("el-button",{staticClass:"btn-auto",attrs:{type:"primary",icon:"el-icon-search",plain:"",loading:t.loading},on:{click:t.search}},[t._v("解析")]),null!=t.listinfo?n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"info-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",[t._v(t._s(t.listinfo.name)+" 来自:"+t._s(t.listinfo.user)+" 共有:"+t._s(t.listinfo.total)+"首歌")])]),n("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[n("el-row",[t.aplayermusic.show?n("aplayer",{ref:"aplayer",attrs:{music:t.aplayermusic,autoplay:"",repeat:"repeat-one"}}):t._e()],1)],1)],1):t._e(),[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.tablesonglist,align:"left"},on:{"row-dblclick":t.rowClick,"cell-mouse-enter":t.mouseEnter,"cell-mouse-leave":t.mouseLeave,"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"50"}}),n("el-table-column",{attrs:{prop:"name",label:"歌名"}}),n("el-table-column",{attrs:{prop:"singer",label:"歌手"}}),n("el-table-column",{attrs:{width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.tablesonglist[e.$index].size,placement:"left"}},[n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-download",plain:"",circle:""},on:{click:function(n){return t.download(e.$index)}}})],1),n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.tablesonglist[e.$index].playShow,expression:"tablesonglist[a.$index].playShow"}],attrs:{size:"small",icon:"el-icon-video-play",plain:"",circle:""},on:{click:function(n){return t.startPlayOrPause(t.tablesonglist[e.$index].mid,t.tablesonglist[e.$index].name,t.tablesonglist[e.$index].singer)}}})]}}])},[n("template",{slot:"header"},[n("el-button",{attrs:{type:"primary",plain:"",disabled:t.disabledChoose},on:{click:t.downloadChoose}},[t._v("下载选中")])],1)],2)],1)]],2)],1)],1),n("el-footer",[n("el-row",[n("el-col",{attrs:{xs:24,sm:18,md:14,lg:14,id:"main"}},[n("a",{staticStyle:{display:"inline-block","text-decoration":"none",height:"20px","line-height":"20px"},attrs:{target:"_blank",href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=41152502000110"}},[n("img",{staticStyle:{float:"left"},attrs:{src:"https://s1.ax1x.com/2020/03/24/8qhVyj.png"}}),n("span",{staticStyle:{float:"left",height:"20px","line-height":"20px",margin:"0px 0px 0px 5px",color:"#939393"}},[t._v("豫公网安备 41152502000110号")])]),n("a",{staticStyle:{display:"inline-block","text-decoration":"none",height:"20px","line-height":"20px"},attrs:{target:"_blank",href:"http://www.beian.miit.gov.cn"}},[n("span",{staticStyle:{float:"left",height:"20px","line-height":"20px",margin:"0px 0px 0px 5px",color:"#939393"}},[t._v("豫ICP备19039675号")])])])],1)],1)],1)},w=[],x=(n("4160"),n("c975"),n("fb6a"),n("a434"),n("b0c0"),n("ac1f"),n("5319"),n("9911"),n("159b"),"tabale-vuejs"),k="listinfo",_={fetch:function(){return JSON.parse(window.localStorage.getItem(x)||"[]")},save:function(t){window.localStorage.setItem(x,JSON.stringify(t))},getsonglist:function(){return JSON.parse(window.localStorage.getItem(x)||"[]")},getinfo:function(){return JSON.parse(window.localStorage.getItem(k)||null)},updatainfo:function(t){window.localStorage.setItem(k,JSON.stringify(t))}},S=(n("b680"),n("3e8f")),O={formatSize:function(t){var e="";e=t<1024?t.toFixed(2)+"B":t<1048576?(t/1024).toFixed(2)+"KB":t<1073741824?(t/1048576).toFixed(2)+"MB":(t/1073741824).toFixed(2)+"GB";var n=e+"",i=n.indexOf("."),a=n.substr(i+1,2);return"00"==a?n.substring(0,i)+n.substr(i+3,2):n},makeNameInfo:function(t){S.writeFile("info.json",t,"utf8",(function(t){if(t)return console.log(t),!1;console.log("信息文件写入成功")}))},getIndexInArray:function(t,e){var n=t.length;while(n--)if(t[n]===e)return n;return!1}},C=n("0f7d"),P=n.n(C),j={name:"PlayList",components:{aplayer:P.a},data:function(){return{link:"",playlistid:"",song:{id:"",mid:"",name:"",singer:"",album:"",type:"",size:""},songlist:[],Selection:[],loading:!1,disabledChoose:!0,audiosrc:null,audio:{playing:!1},aplayermusic:{show:!1},playingmid:null,tablesonglist:_.getsonglist(),listinfo:_.getinfo()}},methods:{formatLink:function(){var t,e;-1!=this.link.indexOf("i.y.qq.com")?(t=this.link.indexOf("id="),e=this.link.indexOf("&ADTAG"),this.playlistid=-1!=e?this.link.slice(t+3,e):this.link.slice(t+3)):-1!=this.link.indexOf("y.qq.com")?(t=this.link.indexOf("/playlist/"),e=this.link.indexOf(".html"),this.playlistid=this.link.slice(t+10,e)):this.playlistid=this.link},search:function(){var t=this;t.loading=!0,this.axios.get("https://mq.api.superboyjack.cn/songlist",{params:{id:this.playlistid}}).then((function(e){if(t.loading=!1,500!=e.data.result)if("{}"!==JSON.stringify(e.data.data)){t.$message({showClose:!0,message:"解析成功",type:"success"}),t.tablesonglist.splice(0,t.tablesonglist.length),t.loading=!1,t.listinfo={name:e.data.data.dissname,user:e.data.data.nick,logo:e.data.data.logo,headurl:e.data.data.headurl,total:e.data.data.total_song_num};for(var n=e.data.data.songlist.length,i={},a=0;a<n;a++){t.songlist=e.data.data.songlist,t.song={id:t.songlist[a].songid,mid:t.songlist[a].songmid,name:t.songlist[a].songname,album:t.songlist[a].albumname,playShow:!1};for(var s=0;s<t.songlist[a].singer.length;s++)t.song.singer=0!=s?t.song.singer+" / "+t.songlist[a].singer[s].name:t.songlist[a].singer[s].name;0!=t.songlist[a].sizeflac?(t.song.type="flac",t.song.size=t.songlist[a].sizeflac):0!=t.songlist[a].sizeape?(t.song.type="ape",t.song.size=t.songlist[a].sizeape):0!=t.songlist[a].size320||0!=t.songlist[a].size128?(t.song.type="128",t.song.size=t.songlist[a].size128):(t.song.type=null,t.song.size=0),i[t.songlist[a].songmid]=t.songlist[a].songname+"-"+t.song.singer,t.song.size=O.formatSize(t.song.size),t.tablesonglist.push(t.song),t.song={id:"",mid:"",name:"",singer:"",album:"",type:"",size:""}}}else t.$message({showClose:!0,message:"未能解析到歌单,请检查输入是否正确",type:"warning"});else t.$message({showClose:!0,message:e.data.errMsg,type:"error"})})).catch((function(e){t.loading=!1,console.log(e)}))},downloadFile:function(t,e,n){try{var i=window.require("electron").ipcRenderer;i.send("setname",e)}catch(s){}var a=document.createElement("a");a.style.display="none",a.href=t,a.setAttribute("download",e+"."+n),document.body.appendChild(a),a.click()},download:function(t){var e=this;this.axios.get("https://mq.api.superboyjack.cn/song/url",{params:{id:this.tablesonglist[t].mid,type:this.tablesonglist[t].type}}).then((function(n){var i=e.tablesonglist[t].name,a=e.tablesonglist[t].type;if("320"!=a&&"128"!=a||(a="mp3"),i=i+"-"+e.tablesonglist[t].singer,"undefined"!=typeof n.data.data){var s=n.data.data.indexOf(".com"),o=n.data.data.replace("http","https");-1!=s&&e.downloadFile(o,i,a)}else e.$message({showClose:!0,message:i+"这首歌已经下架了,无能为力哦",type:"warning"})})).catch((function(t){console.log(t)}))},downloadChoose:function(){var t=this,e=this;this.$message({showClose:!0,message:"开始下载选中的"+this.Selection.length+"首歌"}),this.Selection.forEach((function(n){t.timer=setTimeout((function(){e.download(O.getIndexInArray(t.tablesonglist,n))}),200)}))},rowClick:function(t){var e=this.tablesonglist.indexOf(t),n=this.tablesonglist[e].mid,i=this.tablesonglist[e].name,a=this.tablesonglist[e].singer;this.startPlayOrPause(n,i,a)},mouseEnter:function(t){var e=this.tablesonglist.indexOf(t);this.tablesonglist[e].playShow=!0},mouseLeave:function(t){var e=this.tablesonglist.indexOf(t);this.tablesonglist[e].playShow=!1},handleSelectionChange:function(t){this.Selection=t,0==this.Selection.length?this.disabledChoose=!0:this.disabledChoose=!1},getAudioUrl:function(t){var e=this;this.axios.get("https://mq.api.superboyjack.cn/song/url",{params:{id:t}}).then((function(n){var i=n.data.data.replace("http","https");"undefined"!=typeof i?(e.audiosrc=i,e.playingmid=t):e.$message({showClose:!0,message:"这首歌已经找不到了,换一首听听吧",type:"warning"})})).catch((function(t){console.log(t)}))},startPlayOrPause:function(t,e,n){var i=this,a=this;a.getAudioUrl(t),clearTimeout(this.timer),this.timer=setTimeout((function(){null!=i.audiosrc&&i.play(e,n)}),1e3)},play:function(t,e){var n=this,i=this;this.aplayermusic.show=!1,this.timer=setTimeout((function(){n.aplayermusic={src:i.audiosrc,title:t,artist:e,show:!0}}),20)}},watch:{tablesonglist:{handler:function(t){_.save(t)},deep:!0},listinfo:{handler:function(t){_.updatainfo(t)},deep:!0}}},z=j,$=(n("6880"),Object(r["a"])(z,v,w,!1,null,null,null)),E=$.exports,I={name:"Home",components:{PlayList:E}},N=I,T=Object(r["a"])(N,b,y,!1,null,null,null),q=T.exports;s["default"].use(m["a"]);var L=[{path:"/",name:"Home",component:q,meta:{title:"牟Q音乐"}},{path:"/help",name:"Help",component:function(){return n.e("about").then(n.bind(null,"c3ef"))},meta:{title:"帮助"}},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))},meta:{title:"关于"}},{path:"/playlist",name:"PlayList",component:E}],A=new m["a"]({routes:L});A.beforeEach((function(t,e,n){window._hmt&&t.path&&window._hmt.push(["_trackPageview","/#"+t.fullPath]),n()}));var J=A;s["default"].use(a.a),s["default"].use(h.a,g.a),s["default"].use(P.a),s["default"].config.productionTip=!1,new s["default"]({router:J,render:function(t){return t(d)}}).$mount("#app");var F=F||[];window._hmt=F,function(){var t=document.createElement("script");t.src="https://hm.baidu.com/hm.js?215b0bc22df238301a383657d170d476";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()},"5c0b":function(t,e,n){"use strict";var i=n("9c0c"),a=n.n(i);a.a},6880:function(t,e,n){"use strict";var i=n("469e"),a=n.n(i);a.a},"9c0c":function(t,e,n){},c69f:function(t,e,n){}});
//# sourceMappingURL=app.9c1eb19f.js.map